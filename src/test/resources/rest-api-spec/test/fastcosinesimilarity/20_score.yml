# Integration tests for the fast-cosine-similarity plugin
# Resources:
# https://github.com/elastic/elasticsearch/blob/master/TESTING.asciidoc#testing-the-rest-layer
# https://github.com/elastic/elasticsearch/blob/master/rest-api-spec/README.markdown
---
setup:
- do:
    indices.create:
      index:  test
      body:
        mappings:
          _doc:
            properties:
              name:
                type: text
              vec:
                type: binary
                doc_values: "true"
- do:
    index:
      index: test
      type: _doc
      id: swedish-payments
      body: {"name": "Swedish Payments AB", "vec": "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" }
#- do:
#    index:
#      index: test
#      type: _doc
#      id: digital-payments
#      body:
#        name: "Digital Payments Inc."
#        vec: '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'

- do:
    indices.refresh: {}
---
"document scoring":
- do:
    get:
      index: test
      type: _doc
      id: digital-payments
- set:
    _source.vec: digital_payments_vec
    _source.name: digital_payments_name
- do:
    search:
      index: test
      body:
        query:
          function_score:
            query:
              must_not:
                match:
                  name: $digital_payments_name
            functions:
            - script_score:
                script:
                  source: "staysense"
                  lang: "fast_cosine"
                  params:
                    field: "vec"
                    encoded_vector: $digital_payments_vec

- length: { hits.hits: 1 }
- match:
    hits.hits.0._id: "swedish-payments"
- match:
    hits.hits.0._score: 0.7360324

